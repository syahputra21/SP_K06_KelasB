<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Therabling</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha384-k6RqeWeci5ZR/Lv4MR0sA0FfDOM61JAgFDiZB8zjG3tj6ZoOw0aEdN2P5z92UTB" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body><div class="main-container">
    <!-- Button to toggle sidebar -->
    <button id="toggle-sidebar-btn" class="toggle-sidebar-btn">
        <i class="bi bi-list"></i>
    </button>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <h1>Asisten Solusi Efektif untuk Membantu Anda Mengatasi Kecanduan Judi Online</h1>
        <p>Halo...!!! Saya di sini untuk membantu Anda mengatasi masalah terkait kecanduan judi online dan memberikan solusi yang tepat sesuai keluhan Anda. Apa yang ingin Anda ketahui? ğŸ˜Š</p>
        <ol>
            <li>Cara mengurangi kebiasaan bermain judi online?</li>
            <li>Langkah-langkah untuk berhenti total dari judi online?</li>
            <li>Apa tanda-tanda orang yang telah kecanduan judi online?</li>
            <li>Tips untuk menjaga keuangan agar tidak terganggu oleh judi online?</li>
        </ol>
    </div>        

    <!-- Chat Container -->
    <div class="chat-container">
        <div class="chat-header">
            <a href="/">
                <img src="/static/Header.png" alt="Therabling Logo" class="header-logo">
            </a>
        </div>

    <!-- Chat Box -->
    <div class="chat-box" id="chat-box">
        {% for msg in messages %}
        <div class="chat-row {% if msg.role == 'user' %}user-row{% else %}bot-row{% endif %}">
            <div class="chat-content {% if msg.role == 'user' %}user-bubble{% else %}chat-bubble{% endif %}">
                {% if msg.role != 'user' %}
                <img src="/static/profil bot.png" alt="Profil Bot" class="profile-pic">
                {% endif %}
                <div class="bubble-text">
                    {{ msg.content }}
                    {% if msg.role != 'user' %}
                    <button class="listen-btn" onclick="toggleSpeak(this)">
                        <i class="bi bi-volume-up-fill"></i>
                    </button>
                    <button class="copy-btn" onclick="copyText(this)">
                        <i class="bi bi-clipboard-fill"></i>
                    </button>
                    {% endif %}
                </div>
                {% if msg.role == 'user' %}
                <img src="/static/profil pengguna.png" alt="Profil Pengguna" class="profile-pic">
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>


        <!-- Chat Footer -->
        <div class="chat-footer">
            <form id="chat-form">
                <div class="input-container">
                    <input type="text" name="query" id="query" placeholder="Masukkan pertanyaan Anda..." autocomplete="off" required />
                    <button type="button" id="microphone-button" class="microphone-btn">
                        <i class="bi bi-mic-fill"></i>
                    </button>
                    <button type="submit" class="send-btn">
                        <i class="bi bi-send-fill"></i>
                    </button>
                </div>
                <button type="button" id="clear-message-button" onclick="clearChatMessage()">
                    <i class="bi bi-trash-fill"></i> <strong>Hapus</strong>
                </button>
            </form>
        </div>

<!-- Pop-up Penggunaan Mikrofon -->
<div id="microphone-popup" class="microphone-popup hidden">
    <div class="popup-content">
      <i class="bi bi-mic-fill"></i>
      <p>Mikrofon sedang aktif...</p>
    </div>
  </div>
  
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="/static/script.js"></script>
</body>
</html>